# Docker Quick Reference

This file contains common Docker commands for the Wawa Garden Bar application.

## ðŸš€ Image Optimization Summary

**Image Size**: ~450MB (was ~1.3GB) - **65% reduction**  
**Build Time**: 30-60s cached (was 8-10min) - **90% faster**

### Key Changes
- âœ… Multi-stage build with dependency caching
- âœ… Production-only dependencies (no TypeScript, ESLint, etc.)
- âœ… Next.js standalone output mode
- âœ… Optimized .dockerignore (excludes docs, scripts, uploads)
- âœ… Minimal file copying to final image

See `DOCKER-OPTIMIZATION.md` for full details.

---

## Build & Run Commands

### Local Development
```bash
# Build image locally
docker build -t wawa-garden-bar:latest .

# Run with Docker Compose (builds locally)
docker-compose up -d

# Stop all
docker-compose down
```

### Production Deployment
```bash
# Pull latest image from GHCR and start
docker-compose -f docker-compose.prod.yml pull
docker-compose -f docker-compose.prod.yml up -d

# Update to latest version (one command)
docker-compose -f docker-compose.prod.yml pull && \
docker-compose -f docker-compose.prod.yml up -d --force-recreate app

# Stop all
docker-compose -f docker-compose.prod.yml down
```

## Management Commands

```bash
# View logs
docker logs -f wawa-garden-bar

# Restart
docker restart wawa-garden-bar

# Shell access
docker exec -it wawa-garden-bar sh

# View stats
docker stats wawa-garden-bar

# Health check
curl http://localhost:3000/api/health
```

## Cleanup Commands

```bash
# Remove container
docker stop wawa-garden-bar && docker rm wawa-garden-bar

# Remove image
docker rmi wawa-garden-bar:latest

# Clean up unused resources
docker system prune -a
```
